const _0x26788b=_0x102e;(function(_0x2c1378,_0x2d9971){const _0x13dc69=_0x102e,_0x2c9e35=_0x2c1378();while(!![]){try{const _0xed7818=-parseInt(_0x13dc69(0x163))/0x1+parseInt(_0x13dc69(0x183))/0x2+parseInt(_0x13dc69(0x182))/0x3+-parseInt(_0x13dc69(0x18c))/0x4+-parseInt(_0x13dc69(0x186))/0x5*(parseInt(_0x13dc69(0x1c2))/0x6)+parseInt(_0x13dc69(0x173))/0x7+parseInt(_0x13dc69(0x1a5))/0x8*(parseInt(_0x13dc69(0x1c0))/0x9);if(_0xed7818===_0x2d9971)break;else _0x2c9e35['push'](_0x2c9e35['shift']());}catch(_0x277454){_0x2c9e35['push'](_0x2c9e35['shift']());}}}(_0x4184,0x89c98));const canvas=document[_0x26788b(0x167)](_0x26788b(0x19d)),ctx=canvas[_0x26788b(0x1af)]('2d');let drawing=![],lastX=0x0,lastY=0x0,lastTime=0x0,lastLineWidth=0x2;canvas[_0x26788b(0x1bc)]('mousedown',startDrawing),canvas[_0x26788b(0x1bc)](_0x26788b(0x16e),stopDrawing),canvas['addEventListener'](_0x26788b(0x171),draw),canvas[_0x26788b(0x1bc)](_0x26788b(0x164),startDrawing),canvas[_0x26788b(0x1bc)](_0x26788b(0x16d),stopDrawing),canvas[_0x26788b(0x1bc)](_0x26788b(0x1a2),draw);function startDrawing(_0x3a028b){const _0x29f557=_0x26788b;_0x3a028b[_0x29f557(0x194)]();const {x:_0x402063,y:_0x3dcd8e}=getPosition(_0x3a028b);drawing=!![],lastX=_0x402063,lastY=_0x3dcd8e,lastTime=Date['now']();}function stopDrawing(){const _0x4e0ab4=_0x26788b;drawing=![],ctx[_0x4e0ab4(0x161)]();}function draw(_0x4ab6bb){const _0x30d53c=_0x26788b;_0x4ab6bb[_0x30d53c(0x194)]();if(!drawing)return;const {x:_0x408568,y:_0x598fcd}=getPosition(_0x4ab6bb),_0x16bc84=Date[_0x30d53c(0x1bd)](),_0x5ae044=_0x16bc84-lastTime;lastTime=_0x16bc84;const _0x2f20c0=Math[_0x30d53c(0x17e)]((_0x408568-lastX)**0x2+(_0x598fcd-lastY)**0x2),_0x24a31d=_0x2f20c0/(_0x5ae044||0x1);let _0x22fbde=Math['max'](0x1,Math[_0x30d53c(0x172)](0x6,0xa-_0x24a31d*0.2));_0x22fbde=lastLineWidth*0.7+_0x22fbde*0.3,lastLineWidth=_0x22fbde,ctx[_0x30d53c(0x18b)]=_0x22fbde,ctx[_0x30d53c(0x1b6)]=_0x30d53c(0x165),ctx[_0x30d53c(0x1ba)]=_0x30d53c(0x165),ctx[_0x30d53c(0x180)]=colorSignature,ctx[_0x30d53c(0x161)](),ctx[_0x30d53c(0x17a)](lastX,lastY),ctx[_0x30d53c(0x16f)](_0x408568,_0x598fcd),ctx[_0x30d53c(0x179)](),lastX=_0x408568,lastY=_0x598fcd;}function getPosition(_0x2e2d2d){const _0x274c86=_0x26788b;let _0x299758,_0x588396;return _0x2e2d2d[_0x274c86(0x162)]?(_0x299758=_0x2e2d2d[_0x274c86(0x162)][0x0][_0x274c86(0x1ad)]-canvas['getBoundingClientRect']()[_0x274c86(0x188)],_0x588396=_0x2e2d2d[_0x274c86(0x162)][0x0][_0x274c86(0x184)]-canvas[_0x274c86(0x1bb)]()['top']):(_0x299758=_0x2e2d2d[_0x274c86(0x192)],_0x588396=_0x2e2d2d[_0x274c86(0x1c1)]),{'x':_0x299758,'y':_0x588396};}function clearCanvas(){const _0x59d383=_0x26788b;ctx[_0x59d383(0x1b1)](0x0,0x0,canvas[_0x59d383(0x17d)],canvas[_0x59d383(0x19f)]);const _0x4088c5=document['getElementById'](_0x59d383(0x175));_0x4088c5&&_0x4088c5['remove']();}let statuClickPreview=![];function _0x102e(_0x3ed900,_0x2ef325){const _0x41844b=_0x4184();return _0x102e=function(_0x102e8b,_0x39bb69){_0x102e8b=_0x102e8b-0x161;let _0x34e411=_0x41844b[_0x102e8b];return _0x34e411;},_0x102e(_0x3ed900,_0x2ef325);}function previewSignature(_0x42cdee){const _0x49f2fa=_0x26788b;statuClickPreview=!![];const _0x328d26=canvas[_0x49f2fa(0x170)](_0x49f2fa(0x198)),_0xc2609d=document[_0x49f2fa(0x167)](_0x49f2fa(0x189));let _0x5ce9f0=document[_0x49f2fa(0x167)](_0x49f2fa(0x175));!_0x5ce9f0&&(_0x5ce9f0=document[_0x49f2fa(0x1be)](_0x49f2fa(0x176)),_0x5ce9f0['id']=_0x49f2fa(0x175),_0x5ce9f0[_0x49f2fa(0x1b7)][_0x49f2fa(0x1a4)]=_0x49f2fa(0x1c7),_0x5ce9f0[_0x49f2fa(0x1b7)][_0x49f2fa(0x17d)]=_0x42cdee+'%',_0x5ce9f0['style'][_0x49f2fa(0x19f)]='auto',_0x5ce9f0['style']['position']='absolute',_0x5ce9f0[_0x49f2fa(0x1b7)][_0x49f2fa(0x188)]=_0x49f2fa(0x1ae),_0x5ce9f0['style'][_0x49f2fa(0x169)]=_0x49f2fa(0x1ae),_0x5ce9f0[_0x49f2fa(0x1b7)][_0x49f2fa(0x191)]=_0x49f2fa(0x177),_0xc2609d[_0x49f2fa(0x190)](_0x5ce9f0));_0x5ce9f0[_0x49f2fa(0x187)]=_0x328d26,setTimeout(()=>{const _0x5b59a3=_0x49f2fa;_0x5ce9f0[_0x5b59a3(0x1a8)]({'behavior':'smooth','block':'center'});},0x64);let _0x50580d=document[_0x49f2fa(0x167)](_0x49f2fa(0x1a6));!_0x50580d&&(_0x50580d=document[_0x49f2fa(0x1be)](_0x49f2fa(0x1ac)),_0x50580d['id']=_0x49f2fa(0x1a6),_0x50580d[_0x49f2fa(0x1a3)]=_0x49f2fa(0x195),_0x50580d[_0x49f2fa(0x1b7)][_0x49f2fa(0x19b)]=_0x49f2fa(0x18e),_0x50580d['style'][_0x49f2fa(0x1b4)]=_0x49f2fa(0x197),_0x50580d['style']['color']=_0x49f2fa(0x16b),_0x50580d[_0x49f2fa(0x1b7)]['padding']=_0x49f2fa(0x17b),_0x50580d[_0x49f2fa(0x1b7)][_0x49f2fa(0x19c)]='5px',_0x50580d[_0x49f2fa(0x1b7)][_0x49f2fa(0x169)]=_0x49f2fa(0x1aa)+parseInt(_0x5ce9f0[_0x49f2fa(0x1b7)][_0x49f2fa(0x169)])+_0x49f2fa(0x18a),_0x50580d['style'][_0x49f2fa(0x188)]=_0x5ce9f0[_0x49f2fa(0x1b7)]['left'],_0x50580d[_0x49f2fa(0x1b7)][_0x49f2fa(0x185)]=_0x49f2fa(0x1b5),_0x50580d['style'][_0x49f2fa(0x1c4)]=_0x49f2fa(0x166),_0xc2609d[_0x49f2fa(0x190)](_0x50580d),setTimeout(()=>{if(_0x50580d)_0x50580d['remove']();},0x1388));function _0x4d89a5(_0x30ca4d){const _0x1e8405=_0x49f2fa;_0x30ca4d[_0x1e8405(0x194)]();let _0x44ebe2=_0x30ca4d[_0x1e8405(0x16c)][_0x1e8405(0x181)]('touch'),_0x258856=_0x44ebe2?_0x30ca4d['touches'][0x0][_0x1e8405(0x1ad)]:_0x30ca4d[_0x1e8405(0x1ad)],_0x26ad0b=_0x44ebe2?_0x30ca4d[_0x1e8405(0x162)][0x0][_0x1e8405(0x184)]:_0x30ca4d[_0x1e8405(0x184)],_0x29ddf2=_0xc2609d[_0x1e8405(0x1bb)](),_0x3b675a=_0x5ce9f0[_0x1e8405(0x1bb)](),_0xafccce=_0x258856-_0x3b675a[_0x1e8405(0x188)],_0x54766a=_0x26ad0b-_0x3b675a['top'];function _0x3843e4(_0x10c8ac,_0x564634){const _0x9625fc=_0x1e8405;let _0x5c738d=_0x10c8ac-_0xafccce-_0x29ddf2[_0x9625fc(0x188)],_0x5d2131=_0x564634-_0x54766a-_0x29ddf2[_0x9625fc(0x169)];_0x5c738d=Math[_0x9625fc(0x19e)](0x0,Math[_0x9625fc(0x172)](_0x5c738d,_0x29ddf2[_0x9625fc(0x17d)]-_0x3b675a['width'])),_0x5d2131=Math[_0x9625fc(0x19e)](0x0,Math[_0x9625fc(0x172)](_0x5d2131,_0x29ddf2[_0x9625fc(0x19f)]-_0x3b675a[_0x9625fc(0x19f)]));let _0x14d8b1=_0x5c738d/_0x29ddf2[_0x9625fc(0x17d)]*0x64,_0x3e34ae=_0x5d2131/_0x29ddf2[_0x9625fc(0x19f)]*0x64;_0x5ce9f0['style']['left']=_0x14d8b1+'%',_0x5ce9f0[_0x9625fc(0x1b7)][_0x9625fc(0x169)]=_0x3e34ae+'%',_0x50580d&&(_0x50580d['remove'](),_0x50580d=null);}function _0x38d582(_0x2ecdb5){const _0x3e00cc=_0x1e8405;let _0x2cd748=_0x44ebe2?_0x2ecdb5['touches'][0x0][_0x3e00cc(0x1ad)]:_0x2ecdb5[_0x3e00cc(0x1ad)],_0x252840=_0x44ebe2?_0x2ecdb5[_0x3e00cc(0x162)][0x0][_0x3e00cc(0x184)]:_0x2ecdb5[_0x3e00cc(0x184)];_0x3843e4(_0x2cd748,_0x252840);}function _0xc8e7b2(){const _0x37ed54=_0x1e8405;document['removeEventListener']('mousemove',_0x38d582),document['removeEventListener'](_0x37ed54(0x16e),_0xc8e7b2),document[_0x37ed54(0x16a)](_0x37ed54(0x1a2),_0x38d582),document[_0x37ed54(0x16a)]('touchend',_0xc8e7b2);}document[_0x1e8405(0x1bc)](_0x44ebe2?'touchmove':_0x1e8405(0x171),_0x38d582),document[_0x1e8405(0x1bc)](_0x44ebe2?_0x1e8405(0x16d):_0x1e8405(0x16e),_0xc8e7b2);}_0x5ce9f0[_0x49f2fa(0x1ab)]=_0x4d89a5,_0x5ce9f0[_0x49f2fa(0x1a7)]=_0x4d89a5,_0x5ce9f0[_0x49f2fa(0x1b3)]=()=>![];}function saveSignature(_0x10ec51,_0x996c2,_0x59a93e){const _0x2723f1=_0x26788b,_0x3eed00=confirm(_0x2723f1(0x1c3));if(!_0x3eed00)return;const _0x11c843=!ctx['getImageData'](0x0,0x0,canvas[_0x2723f1(0x17d)],canvas['height'])['data'][_0x2723f1(0x1a1)](_0x424c4f=>_0x424c4f!==0x0);if(_0x11c843){alert(_0x2723f1(0x18f));return;}if(statuClickPreview==![]){alert(_0x2723f1(0x1bf));return;}else statuClickPreview==![];const _0x58197c=document[_0x2723f1(0x167)](_0x2723f1(0x175)),_0xf54c1d=document['getElementById'](_0x2723f1(0x189));let _0x223370=0x0,_0x24d8d8=0x0;if(_0x58197c&&_0xf54c1d){const _0x41b7dd=_0xf54c1d[_0x2723f1(0x1bb)](),_0x505674=_0x58197c[_0x2723f1(0x1bb)]();_0x223370=(_0x505674[_0x2723f1(0x188)]-_0x41b7dd['left'])/_0x41b7dd['width']*0x64,_0x24d8d8=(_0x505674['top']-_0x41b7dd[_0x2723f1(0x169)])/_0x41b7dd[_0x2723f1(0x19f)]*0x64;}const _0x239976=_0x59a93e,_0x176de3=document[_0x2723f1(0x1be)](_0x2723f1(0x1b2));_0x176de3[_0x2723f1(0x17d)]=canvas[_0x2723f1(0x17d)]*_0x239976,_0x176de3['height']=canvas['height']*_0x239976;const _0x654077=_0x176de3[_0x2723f1(0x1af)]('2d');_0x654077[_0x2723f1(0x17c)](canvas,0x0,0x0,_0x176de3['width'],_0x176de3[_0x2723f1(0x19f)]);const _0x47d26e=_0x176de3[_0x2723f1(0x170)](_0x2723f1(0x198));fetch(libraryURL+'save_signature.php',{'method':_0x2723f1(0x199),'body':JSON[_0x2723f1(0x1b9)]({'signature':_0x47d26e,'idUser':_0x10ec51,'userCard':_0x996c2,'x':_0x223370,'y':_0x24d8d8}),'headers':{'Content-Type':'application/json'}})['then'](_0x43f215=>_0x43f215[_0x2723f1(0x19a)]())[_0x2723f1(0x17f)](_0xe4aaf6=>{const _0x597dbf=_0x2723f1;_0xe4aaf6[_0x597dbf(0x1c5)]?(localStorage[_0x597dbf(0x193)]('scrollToPreviewContainer',_0x597dbf(0x178)),alert(_0x597dbf(0x168)),setTimeout(()=>{const _0x32ebf4=_0x597dbf;loadSignatures(defaultIdUser,defaultUserTag,sizeSignature2);const _0x330750=localStorage[_0x32ebf4(0x1a0)](_0x32ebf4(0x1c6));document['querySelector'](_0x330750)?.[_0x32ebf4(0x1a8)]({'behavior':_0x32ebf4(0x1b0),'block':_0x32ebf4(0x196)}),clearCanvas();},0x1f4)):alert(_0x597dbf(0x1b8)+_0xe4aaf6[_0x597dbf(0x18d)]);})[_0x2723f1(0x174)](_0x335413=>console[_0x2723f1(0x18d)](_0x2723f1(0x1a9),_0x335413));}function _0x4184(){const _0x332e6f=['689311SSewFF','catch','signatureImage','img','move','#previewContainer','stroke','moveTo','5px\x2010px','drawImage','width','sqrt','then','strokeStyle','includes','1858533IgwCOP','1388558XAeNrb','clientY','zIndex','726490RUZNKE','src','left','previewContainer','%\x20-\x2030px','lineWidth','1967040yNxbIe','error','absolute','Vui\x20lòng\x20ký\x20trước\x20khi\x20lưu!','appendChild','cursor','offsetX','setItem','preventDefault','Kéo\x20thả\x20để\x20thay\x20đổi\x20vị\x20trí','center','rgba(0,\x200,\x200,\x200.7)','image/png','POST','json','position','borderRadius','signatureCanvas','max','height','getItem','some','touchmove','textContent','border','8TIHUaq','dragMessage','ontouchstart','scrollIntoView','Lỗi:','calc(','onmousedown','div','clientX','10%','getContext','smooth','clearRect','canvas','ondragstart','background','1000','lineCap','style','Lỗi\x20khi\x20lưu:\x20','stringify','lineJoin','getBoundingClientRect','addEventListener','now','createElement','Nhấn\x20vào\x20nút\x20\x22Xem\x20Thử\x22\x20để\x20xem\x20trước\x20chữ\x20ký\x20trước\x20khi\x20lưu!','2169azlKgU','offsetY','12cQmcVX','Bạn\x20có\x20chắc\x20chắn\x20muốn\x20ký\x20và\x20lưu\x20không?','fontSize','success','scrollToPreviewContainer','2px\x20solid\x20red','beginPath','touches','65772iEFDtv','touchstart','round','14px','getElementById','Chữ\x20ký\x20đã\x20được\x20lưu!','top','removeEventListener','white','type','touchend','mouseup','lineTo','toDataURL','mousemove','min'];_0x4184=function(){return _0x332e6f;};return _0x4184();}